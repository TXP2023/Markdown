# 排列组合

## 加法原理
完成一件事情，可以有$n$类办法，在第一类办法中有$m_1$种不同的方法，在第二类办法中有$m_2$种不同的方法，……，在第$n$类办法中有$m_n$种不同的方法，那么完成这件事共有$N = m_1 + m_2 + \cdots + m_n$种不同的方法。  

例如，从武汉到上海有乘火车、飞机、轮船$3$种交通方式可供选择，而火车、飞机、轮船分别有$k_1$，$k_2$，$k_3$个班次，那么从武汉到上海共有$k_1 + k_2 + k_3$种方式可以到达。  


## 乘法原理 
完成一件事情，需要分成$n$个步骤，做第一步有$m_1$种不同的方法，做第二步有$m_2$种不同的方法，……，做第$n$步有$m_n$种不同的方法，那么完成这件事有$N = m_1×m_2×\cdots×m_n$种不同的方法。  

例如，在密码学中，一个由数字$0$～$9$组成的四位密码的可能性为$10×10×10×10 = 10000$种，因为每一位都有$10$种可能（$0$～$9$ ）。  

两个原理的区别：一个与**分类**有关，另一个与**分步**有关。加法原理是“分类完成”，乘法原理是“分步完成”。  


## 容斥原理 
容斥原理的基本思想是先不考虑重叠的情况，把包含某内容的所有对象的数目先计算出来，然后再把计数时重复计算的数目排除，使计算的结果既无遗漏又无重复。这种方法可以使重叠部分不被重复计算，从而得到更准确的结果。  

假设一个班级里有$50$名学生，其中$20$名学生参加了数学奥赛，$30$名学生参加了物理奥赛，$15$名学生同时参加了数学和物理奥赛。我们需要找出这个班级里一共有多少名学生参加了至少一项奥赛。  

首先，把参加数学奥赛的学生数（$20$人）和参加物理奥赛的学生数（$30$人）加起来，得到$50$人。但是，这$50$人中包含了同时参加两项奥赛的$15$名学生，这部分学生被重复计算了一次。所以需要从总数中减去这$15$名学生，以消除重复计数。  

故最终参加至少一项奥赛的学生数为：  
$20$（参加数学奥赛）$ + 30$（参加物理奥赛）$- 15$（同时参加两项奥赛）$ = 35$人。  

容斥原理的集合形式如下：  
两个集合：$A\cup B = A + B - A\cap B$  
三个集合：$A\cup B\cup C = A + B + C - A\cap B - B\cap C - C\cap A + A\cap B\cap C$  
$N$个集合：  
$\vert A_1\cup A_2\cup\cdots\cup A_n\vert = \sum_{1\leq i\leq n}\vert A_i\vert - \sum_{1\leq i < j\leq n}\vert A_i\cap A_j\vert + \sum_{1\leq i < j < k\leq n}\vert A_i\cap A_j\cap A_k\vert - \cdots + (-1)^{n - 1}\vert A_1\cap A_2\cap\cdots\cap A_n\vert$


## 排列数

在  $n$ 个元素集中选 $m$ 个组成一个有序子集，有多少种不同子集？

将这个值记为 $A_n^m$

$A_n^m =  {{n!}\over{(n-m)!}}$

下面是理论证明

从 $n$ 个元素中选取 $m$ 个元素的方案为

 $n*(n-1)*...*(n - m + 1)$ 

这里要加一是因为直接 $n-m$ 子集的大小就多了一，所以要加上

$\qquad A_n^m$

$= n*(n-1)*...*(n - m + 1)$ 

$={(n*(n-1)*...*(n - m + 1) * (n - m) * (n - m - 1)*...*1) \over {(n - m) * (n - m - 1)*...*1}}$

$={n! \over (n - m)!}$

证毕

## 组合数

那么如果这个子集是无序的，子集方案数记为

$C_{n}^{m} = \tbinom{n}{m}$ 

这里C和大圆括号的$n,m$上下就是相反的，没打错

$C_{n}^{m} = {{n!}\over{m!(n-m)!}}$

下面证明

已知 $A_n^m =  {{n!}\over{(n-m)!}}$ 要把重复集合去掉

对于任意一个元素数量为 $m$ 的集合，期中元素的排列组合数为 $m!$

由于排列数对于任意一个长度为 $m$ 的组合都重复计算了 $m!$ 次，故将 $A_n^m$ 除掉 $m!$ 即可。 故

$C_{n}^{m} = {{A_n^m}\over{m!}} = {{n!}\over{m!(n-m)!}}$


### 组合数恒等式

####  帕斯卡 / 杨辉三角公式

$C_{n}^{m} = C_{n-1}^{m} + C_{n-1}^{m-1}$

证明

从$n$个元素的集合$S$中选$m$个作为子集，对于 $a \in S$, 有2中情况

1. $a$ 不在子集中，那么方案为

    $C_{n - 1}^{m}$

    因为不选a，所以集合中有效元素减少为 $n-1$ 个

2. $a$ 在子集中，那么方案为

    $C_{n - 1}^{m - 1}$

    因为已经确定1个元素了，那么有效集和子集都各减少了1个名额

    因为

    $在n中选m = 选a的情况 + 不选a的情况$

    所以

    $C_{n}^{m} = C_{n - 1}^{m} + C_{n - 1}^{m - 1}$

    证毕

